<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BIG Mock Assessment</title>

<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial,sans-serif;
  background:linear-gradient(135deg,#fff,#f5f6fa);
  color:#222;
}
header{
  padding:20px;
  background:#fff;
  border-bottom:2px solid #e5e7eb;
}
h1{margin:0;font-size:20px}
.tabs button{
  margin:4px;
  padding:10px 14px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  cursor:pointer;
}
.tabs button.active{
  background:#ffe7e8;
  border-color:#d61f26;
}
section{display:none;padding:20px}
section.active{display:block}
.card{
  background:#fff;
  border:1px solid #ddd;
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
}
button{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid #ccc;
  background:#fafafa;
  cursor:pointer;
}
button.primary{
  background:#d61f26;
  color:#fff;
  border:none;
}
button:disabled{opacity:.5}
.timer{font-weight:bold}
.prompt{
  font-size:16px;
  padding:14px;
  border-radius:12px;
  background:#f8f9fc;
  border:1px solid #ddd;
  margin-top:10px;
}
.rubric select{margin:4px}
.notice{
  background:#fff3cd;
  border:1px solid #f1c40f;
  padding:10px;
  border-radius:12px;
  margin-bottom:12px;
}
</style>
</head>

<body>

<header>
<h1>üî¥ BIG Mock Assessment ‚Äî EN ‚Üî ES</h1>
<div class="tabs">
<button class="active" onclick="openTab('home')">Resumen</button>
<button onclick="openTab('p1')">Parte 1</button>
<button onclick="openTab('p2')">Parte 2</button>
<button onclick="openTab('p3')">Parte 3</button>
<button onclick="openTab('audio')">Mis audios</button>
<button onclick="openTab('inst')">Instructor</button>
</div>
</header>

<section id="home" class="active">
<div class="card">
<p><b>Instrucciones</b></p>
<ul>
<li>Graba cada respuesta</li>
<li>Usa primera persona</li>
<li>Descarga el audio</li>
</ul>
<p>Timer: <span class="timer" id="timer">00</span></p>
<button onclick="startTimer()">‚ñ∂ Iniciar</button>
<button onclick="stopTimer()">‚èπ Parar</button>
</div>
</section>

<section id="p1">
<div class="card">
<h3>Parte 1 ‚Äî Sight</h3>
<div class="prompt" id="p1text"></div>
<br>
<button onclick="record()">üéô Grabar</button>
<button onclick="stopRecord()">‚èπ Parar</button>
<button onclick="download()">‚¨á Descargar</button>
</div>
</section>

<section id="p2">
<div class="card">
<h3>Parte 2 ‚Äî Di√°logo</h3>
<div class="prompt" id="p2text"></div>
</div>
</section>

<section id="p3">
<div class="card">
<h3>Parte 3 ‚Äî Terminolog√≠a</h3>
<div class="prompt" id="p3text"></div>
</div>
</section>

<section id="audio">
<div class="card">
<h3>Audios grabados</h3>
<div id="audioList"></div>
</div>
</section>

<section id="inst">
<div class="card">
<h3>Modo Instructor</h3>
<input id="pass" placeholder="Clave 1122">
<button onclick="login()">Entrar</button>
<p id="instStatus"></p>
</div>
</section>

<script>
/* ---------- TABS ---------- */
function openTab(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

/* ---------- DATA ---------- */
const p1=["Read and interpret in first person."];
const p2=["Provider: How are you feeling today?"];
const p3=["Sore throat"];

document.getElementById("p1text").textContent=p1[0];
document.getElementById("p2text").textContent=p2[0];
document.getElementById("p3text").textContent=p3[0];

/* ---------- TIMER ---------- */
let t=0,intv;
function startTimer(){
  stopTimer();
  intv=setInterval(()=>{t++;document.getElementById("timer").textContent=t},1000);
}
function stopTimer(){clearInterval(intv);}

/* ---------- RECORDING ---------- */
let rec,stream,chunks=[],currentBlob;

async function record(){
  stream=await navigator.mediaDevices.getUserMedia({audio:true});
  rec=new MediaRecorder(stream);
  chunks=[];
  rec.ondataavailable=e=>chunks.push(e.data);
  rec.onstop=()=>{
    currentBlob=new Blob(chunks,{type:"audio/webm"});
    const url=URL.createObjectURL(currentBlob);
    const a=document.createElement("audio");
    a.controls=true;a.src=url;
    document.getElementById("audioList").appendChild(a);
  };
  rec.start();
}
function stopRecord(){ if(rec) rec.stop(); }
function download(){
  if(!currentBlob) return;
  const a=document.createElement("a");
  a.href=URL.createObjectURL(currentBlob);
  a.download="response.webm";
  a.click();
}

/* ---------- INSTRUCTOR ---------- */
function login(){
  document.getElementById("instStatus").textContent =
    document.getElementById("pass").value==="1122"
    ? "Instructor desbloqueado"
    : "Clave incorrecta";
}
</script>

</body>
</html>
